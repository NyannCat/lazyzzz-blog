(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-614027fa"],{"0889":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"input-container"},[r("el-input",{attrs:{placeholder:"请输入关键词","suffix-icon":"el-icon-search"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getImages(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),0===t.data.total?r("div",{staticStyle:{"text-align":"center","padding-top":"30px","padding-bottom":"30px"}},[t._v(" 暂无数据 ")]):t._e(),r("el-row",t._l(t.data.records,(function(e,a){return r("el-col",{key:a,attrs:{span:8}},[r("div",{staticClass:"image-container"},[r("el-image",{staticStyle:{height:"80px"},attrs:{src:e.path,fit:"center"},on:{click:function(e){return t.drawerHandler(a)}}})],1)])})),1),r("div",{staticStyle:{display:"block","text-align":"center"}},[r("el-pagination",{attrs:{"page-size":t.data.size,total:t.data.total,"current-page":t.data.current,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1),r("el-drawer",{attrs:{"append-to-body":!0,visible:t.drawer,direction:"rtl",title:"附件详情"},on:{"update:visible":function(e){t.drawer=e}}},[r("el-image",{staticStyle:{height:"50%"},attrs:{src:t.record.path}}),r("el-divider",[r("i",{staticClass:"el-icon-picture-outline-round"})]),r("el-card",[r("div",{staticClass:"item text"},[r("div",[t._v("名称")]),t._v(" "+t._s(t.record.name)+" ")]),r("div",{staticClass:"item text"},[r("div",[t._v("类型")]),t._v(" "+t._s(t.record.mediaType)+" ")]),r("div",{staticClass:"item text"},[r("div",[t._v("引用连接")]),r("el-link",{attrs:{href:t.record.path,type:"primary"}},[t._v(" "+t._s(t.record.path)+" ")])],1)])],1)],1)},n=[],i=(r("4160"),r("159b"),r("91b6")),o={name:"AttachmentDrawer",created:function(){this.getImages()},data:function(){return{drawer:!1,keyword:"",data:{records:[{id:1,name:"",path:"",fileKey:"",mediaType:"",width:0,height:0,attachmentType:0}],total:0,size:9,current:1,pages:1},record:{name:"",path:"",mediaType:"",width:0,height:0,attachmentType:""}}},methods:{drawerHandler:function(t){this.record=this.data.records[t],this.drawer=!0},getImages:function(){var t=this;Object(i["b"])({page:this.data.current,size:this.data.size,keyword:this.keyword}).then((function(e){t.data=e.data,t.data.records.forEach((function(t,e){0===t.attachmentType&&(t.path=""+t.path)}))}))},handleCurrentChange:function(t){this.data.current=t,this.getImages()}}},c=o,s=(r("b208"),r("2877")),l=Object(s["a"])(c,a,n,!1,null,"6e9ba312",null);e["a"]=l.exports},2423:function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return c}));var a=r("b775");function n(t){return Object(a["a"])({url:"/article/all",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/article",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/article",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/article",method:"delete",params:t})}},"3daf":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app-container"}},[r("div",{attrs:{id:"markdown-container"}},[r("mavon-editor",{ref:"md",staticStyle:{"min-height":"600px"},on:{change:t.change},model:{value:t.form.originalContent,callback:function(e){t.$set(t.form,"originalContent",e)},expression:"form.originalContent"}})],1),r("div",{attrs:{id:"form-container"}},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px",size:"medium"}},[r("el-form-item",{attrs:{label:"文章标题",prop:"title",required:""}},[r("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"文章摘要",prop:"summary",required:""}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1),r("el-form-item",{attrs:{label:"文章封面",prop:"coverPage",required:""}},[r("el-input",{model:{value:t.form.coverPage,callback:function(e){t.$set(t.form,"coverPage",e)},expression:"form.coverPage"}})],1),r("el-form-item",{attrs:{label:"文章分类",required:""}},[r("el-select",{attrs:{loading:t.loading,"remote-method":t.remote,placeholder:"请选择文章分类",remote:""},model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}},t._l(t.categories,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),r("el-form-item",{attrs:{label:"私密"}},[r("el-switch",{attrs:{"active-color":"#13ce66","active-value":"1","inactive-value":"0"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1),r("el-form-item",{staticStyle:{"text-align":"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit("form")}}},[t._v("提交")]),r("el-button",{attrs:{type:"info"},on:{click:t.onDrawer}},[t._v("附件库")])],1)],1),r("el-drawer",{attrs:{visible:t.drawer,direction:"rtl",title:"附件库"},on:{"update:visible":function(e){t.drawer=e}}},[r("attachment-drawer")],1)],1)])},n=[],i=r("b2d8"),o=(r("64e1"),r("0889")),c=r("c405"),s=r("2423"),l={name:"index",created:function(){var t=this;this.remote();var e=this.$route.query.articleId;console.log(e),void 0!==e&&Object(s["b"])({id:e}).then((function(e){t.form=e.data}))},data:function(){return{drawer:!1,direction:"rtl",form:{originalContent:"",formatContent:"",title:"",coverPage:"",type:0,summary:"",categoryId:""},categories:[{id:1,name:""}],rules:{title:[{required:!0,message:"文章标题不能为空"}],summary:[{required:!0,message:"文章摘要不能为空"}],coverPage:[{required:!0,message:"文章封面不能为空"}]},loading:!0}},methods:{change:function(t,e){this.form.formatContent=e},submit:function(t){var e=this;this.$refs[t].validate((function(t){t?Object(s["d"])(e.form).then((function(t){e.$message.success("文章上传成功")})):e.$message.error("请完整填写表单")}))},onDrawer:function(){this.drawer=!0},remote:function(){var t=this;this.loading=!0,Object(c["c"])().then((function(e){t.categories=e.data,t.loading=!1}))}},components:{AttachmentDrawer:o["a"],"mavon-editor":i["mavonEditor"]}},u=l,d=(r("5325"),r("2877")),m=Object(d["a"])(u,a,n,!1,null,"2a0509c5",null);e["default"]=m.exports},5325:function(t,e,r){"use strict";r("af9c")},7447:function(t,e,r){},"91b6":function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i}));var a=r("b775");function n(t){return Object(a["a"])({url:"/attachment",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/attachment",method:"delete",params:t})}},af9c:function(t,e,r){},b208:function(t,e,r){"use strict";r("7447")},c405:function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"b",(function(){return c}));var a=r("b775");function n(){return Object(a["a"])({url:"/category",method:"get"})}function i(t){return Object(a["a"])({url:"/category",method:"post",params:t})}function o(t){return Object(a["a"])({url:"/category",method:"put",params:t})}function c(t){return Object(a["a"])({url:"/category",method:"delete",params:t})}}}]);